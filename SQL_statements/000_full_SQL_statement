CREATE DATABASE inventory_records
    WITH
    OWNER = postgres
    ENCODING = 'UTF8'
    LOCALE_PROVIDER = 'libc'
    CONNECTION LIMIT = -1
    IS_TEMPLATE = False;

CREATE TABLE public.product
(
    product_id integer NOT NULL,
    product_name character varying(50) NOT NULL,
    sell_price money NOT NULL,
    cost_price money NOT NULL,
    amount_in_stock numeric NOT NULL,
    PRIMARY KEY (product_id)
);

ALTER TABLE IF EXISTS public.product
    OWNER to postgres;

CREATE TABLE public.supplier
(
    supplier_id integer NOT NULL,
    supplier_name character varying(50) NOT NULL,
    contact_id integer NOT NULL,
    PRIMARY KEY (supplier_id)
);

ALTER TABLE IF EXISTS public.supplier
    OWNER to postgres;

CREATE TABLE public.contact
(
    contact_id integer NOT NULL,
    contact_name character varying(50) NOT NULL,
    street character varying(25) NOT NULL,
    city character varying(25) NOT NULL,
    province character varying(2) NOT NULL,
    postal_code character varying(6) NOT NULL,
    email character varying(50) NOT NULL,
    phone numeric(10) NOT NULL,
    PRIMARY KEY (contact_id)
);

ALTER TABLE IF EXISTS public.contact
    OWNER to postgres;

CREATE TABLE public.inventory
(
    inventory_id integer NOT NULL,
    product_id integer NOT NULL,
    supplier_id integer NOT NULL,
    quantity_in_stock numeric NOT NULL DEFAULT 0,
    PRIMARY KEY (inventory_id)
);

ALTER TABLE IF EXISTS public.inventory
    OWNER to postgres;

CREATE TABLE public."order"
(
    order_id integer NOT NULL,
    sales_id integer NOT NULL,
    contact_id integer NOT NULL,
    order_date date NOT NULL,
    total_order_value money NOT NULL,
    PRIMARY KEY (order_id)
);

ALTER TABLE IF EXISTS public."order"
    OWNER to postgres;

CREATE TABLE public.purchase
(
    purchase_id integer NOT NULL,
    supplier_id integer NOT NULL,
    purchase_date date NOT NULL,
    total_cost money NOT NULL DEFAULT 0,
    delivery_id integer NOT NULL,
    PRIMARY KEY (purchase_id)
);

ALTER TABLE IF EXISTS public.purchase
    OWNER to postgres;

CREATE TABLE public.purchase_item
(
    purchase_item_id integer NOT NULL,
    purchase_id integer NOT NULL,
    product_id integer NOT NULL,
    quantity numeric NOT NULL,
    PRIMARY KEY (purchase_item_id)
);

ALTER TABLE IF EXISTS public.purchase_item
    OWNER to postgres;   


CREATE TABLE public.sales
(
    sales_id integer NOT NULL,
    salesperson_id integer NOT NULL,
    customer_id integer NOT NULL,
    sales_date date NOT NULL,
    total_revenue money NOT NULL,
    PRIMARY KEY (sales_id)
);

ALTER TABLE IF EXISTS public.sales
    OWNER to postgres;

CREATE TABLE public.sales_item
(
    sales_item_id integer NOT NULL,
    sales_id integer NOT NULL,
    product_id integer NOT NULL,
    quantity numeric NOT NULL,
    revenue_per_item money NOT NULL,
    PRIMARY KEY (sales_item_id)
);

ALTER TABLE IF EXISTS public.sales_item
    OWNER to postgres;

CREATE TABLE public.payment
(
    payment_id integer NOT NULL,
    sales_id integer NOT NULL,
    payment_date date NOT NULL,
    payment_amount money NOT NULL,
    payment_method character varying(10) NOT NULL,
    PRIMARY KEY (payment_id)
);

ALTER TABLE IF EXISTS public.payment
    OWNER to postgres;

CREATE TABLE public.warehouse
(
    warehouse_id integer NOT NULL,
    warehouse_name character varying(4) NOT NULL,
    warehouse_city character varying(25) NOT NULL,
    sq_ft_capacity numeric NOT NULL,
    PRIMARY KEY (warehouse_id)
);

ALTER TABLE IF EXISTS public.warehouse
    OWNER to postgres;

CREATE TABLE public.deliveries
(
    delivery_id integer NOT NULL,
    warehouse_id integer NOT NULL,
    sales_id integer NOT NULL,
    delivery_date date NOT NULL,
    total_pieces numeric NOT NULL,
    PRIMARY KEY (delivery_id)
);

ALTER TABLE IF EXISTS public.deliveries
    OWNER to postgres;

CREATE TABLE public.delivery_sales
(
    delivery_sales_id integer NOT NULL,
    delivery_id integer NOT NULL,
    sales_id integer NOT NULL,
    PRIMARY KEY (delivery_sales_id)
);

ALTER TABLE IF EXISTS public.delivery_sales
    OWNER to postgres;

CREATE TABLE public.reward_points
(
    reward_points_id integer NOT NULL,
    contact_id integer NOT NULL,
    points_earned numeric NOT NULL DEFAULT 0,
    points_redeemed numeric NOT NULL DEFAULT 0,
    PRIMARY KEY (reward_points_id)
);

ALTER TABLE IF EXISTS public.reward_points
    OWNER to postgres;

CREATE TABLE public.salesperson
(
    salesperson_id integer NOT NULL,
    salesperson_name character varying(25) NOT NULL,
    contact_id integer NOT NULL,
    PRIMARY KEY (salesperson_id)
);

ALTER TABLE IF EXISTS public.salesperson
    OWNER to postgres;

CREATE TABLE public.salesperson_sales
(
    salesperson_sales_id integer NOT NULL,
    salesperson_id integer NOT NULL,
    sales_id integer NOT NULL,
    PRIMARY KEY (salesperson_sales_id)
);

ALTER TABLE IF EXISTS public.salesperson_sales
    OWNER to postgres;
